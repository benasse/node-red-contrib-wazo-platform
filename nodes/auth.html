<script type="text/javascript">
  RED.nodes.registerType('wazo-auth', {
    category: 'config',
    defaults: {
      host: {value: "", required: true},
      port: {value: 443, required: true, validate: RED.validators.number()},
    },
    credentials: {
      username: {type: "text", required: true},
      password: {type: "password", required: true}
    },
    label: function() {
      return `https://${this.host}:${this.port}`;
    },
    oneditprepare: function () {
      var tabs = RED.tabs.create({
        id: "node-config-wazo-auth-tabs",
        onchange: function(tab) {
          $("#node-config-wazo-auth-tabs-content").children().hide();
          $("#" + tab.id).show();
        }
      });
      tabs.addTab({
        id: "wazo-auth-tab-connection",
        label: "Connection"
      });
      tabs.addTab({
        id: "wazo-auth-tab-security",
        label: "Security"
      });
    }
  });
</script>

<script type="text/x-red" data-template-name="wazo-auth">
  <div class="form-row">
    <ul style="min-width: 600px; margin-bottom: 20px;" id="node-config-wazo-auth-tabs"></ul>
  </div>
  <div id="node-config-wazo-auth-tabs-content" style="min-height:150px;">
    <div id="wazo-auth-tab-connection" style="display:none">

      <div class="form-row">
        <label for="node-config-input-host"><i class="fa fa-globe"></i> Host</label>
        <input type="text" id="node-config-input-host" placeholder="Wazo Auth host">
      </div>

      <div class="form-row">
        <label for="node-config-input-port"><i class="fa fa-list-ol"></i> Port</label>
        <input type="text" id="node-config-input-port" placeholder="Wazo Auth port, default to 443">
      </div>

    </div>
    <div id="wazo-auth-tab-security" style="display:none">
  
      <div class="form-row">
        <label for="node-config-input-username"><i class="fa fa-user"></i> Username</label>
        <input type="text" id="node-config-input-username" placeholder="Wazo Username">
      </div>

      <div class="form-row">
        <label for="node-config-input-password"><i class="fa fa-lock"></i> Password</label>
        <input type="password" id="node-config-input-password" placeholder="Wazo Password">
      </div>

    </div>
  </div>
</script>

<script type="text/x-red" data-help-name="wazo-auth">
   <p>Creates a new Wazo Auth node</p>
   <h3>Details</h3>
   <p>Enter your username and password</p>
   <p>This auth module will be used by nodes that require authentication.</p>
</script>
